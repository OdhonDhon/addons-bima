<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Top menu item -->
    <menuitem name="Plagiarism"
        id="menu_document_plagiarism"
        icon="fa-shopping-cart"
        sequence="3"/>

    <menuitem id="menu_document_label" name="Documents"
        parent="menu_document_plagiarism" sequence="1"/>

    <record id="document_document_form_view" model="ir.ui.view">
        <field name="name">document.document.form</field>
        <field name="model">document.document</field>
        <field name="arch" type="xml">
            <form string="Document">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm"/>
                    <button name="check_cosine_sim" type="object" string="Check cosine similarity"/>
                    <button name="confirm" type="object" string="Confirm"
                            attrs="{'invisible': [('state', '=', 'confirm')]}"/>
                </header>
                <sheet string="Document">
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="plagiarism_average" readonly="1"/>
                        </group>
                        <group>
                            <field name="description"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Details">
                            <field context="{'model_id': active_id}" name="document_ids">
                                <tree name="lst_ticket" string="Details" editable="bottom">
                                    <field name="document_id" invisible="1"/>
                                    <field name="compared_document_id"/>
                                    <field name="cosine_similarity" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_view_document" model="ir.actions.act_window">
        <field name="name">Documents</field>
        <field name="res_model">document.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form,graph</field>
        <field eval="False" name="view_id"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
          </p>
        </field>
    </record>

    <menuitem id="menu_document" name="Documents" parent="menu_document_label"
              action="action_view_document" sequence="1"/>

    <record id="document_tree" model="ir.ui.view">
        <field name="name">document.document.tree</field>
        <field name="model">document.document</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'draft'" edit="false">
                <field name="name"/>
                <field name="state"/>
                <field name="plagiarism_average"/>
            </tree>
        </field>
    </record>

</odoo>